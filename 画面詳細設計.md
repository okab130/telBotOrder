# 画面詳細設計

## C-S01: セッション開始画面

### 概要
QRコードスキャン後の初回表示画面。来店人数を入力してセッションを開始する。既存セッションがある場合は自動参加。

### レイアウト
```
+----------------------------------+
|  ようこそ！                      |
|  [店舗名]                        |
|  テーブル: [A-1]                 |
+----------------------------------+
|                                  |
|  来店人数を入力してください      |
|                                  |
|  [ 2 ] 人  [- ] [+]              |
|                                  |
|  [  開始する  ]                  |
|                                  |
+----------------------------------+
```

### UI要素
- **ヘッダー**: 店舗名、テーブル番号
- **来店人数入力**: 
  - デフォルト値: 2人
  - 増減ボタン（-/+）
  - 範囲: 1〜20人
- **開始ボタン**: プライマリカラー、全幅

### 動作
1. 画面表示時、テーブルIDをURLパラメータから取得
2. 既存アクティブセッションの確認
   - ある場合：既存セッションに自動参加、session_codeをローカルストレージに保存、メニュー一覧へ自動遷移
   - ない場合：来店人数入力を表示
3. +/-ボタンで人数調整
4. 開始ボタンタップ
   - バリデーション実行
   - セッション作成
   - session_codeをローカルストレージに保存
   - メニュー一覧へ遷移

### エラー表示
- テーブル不在: 「テーブルが見つかりません」
- テーブル利用不可: 「このテーブルは現在利用できません」

---

## C-S02: メニュー一覧画面

### 概要
カテゴリ別にメニューを表示。商品選択、カート、注文履歴、店員呼び出し、会計へアクセス可能。

### レイアウト
```
+----------------------------------+
| [店舗名]  [検索] [カート(2)]    |
+----------------------------------+
| [前菜] [メイン] [ドリンク] ...  |
+----------------------------------+
| +------------------------------+ |
| | [画像]                       | |
| | ハンバーグ定食               | |
| | ¥1,200                       | |
| +------------------------------+ |
| +------------------------------+ |
| | [画像]  【売り切れ】         | |
| | カレーライス                 | |
| | ¥900                         | |
| +------------------------------+ |
| ...                              |
+----------------------------------+
| [注文履歴] [店員呼び出し] [会計] |
+----------------------------------+
```

### UI要素
- **ヘッダー**: 
  - 店舗名
  - 検索アイコン
  - カートアイコン（数量バッジ付き）
- **カテゴリタブ**: 横スクロール可能
- **商品カード**: 
  - サムネイル画像（400x300px）
  - 商品名
  - 価格
  - 売り切れバッジ（該当時）
- **フッター**: 
  - 注文履歴ボタン
  - 店員呼び出しボタン
  - 会計ボタン

### 動作
1. カテゴリタブタップ → 該当カテゴリの商品を表示
2. 商品カードタップ → 商品詳細画面へ遷移
3. 検索アイコンタップ → 検索画面へ遷移
4. カートアイコンタップ → カート画面へ遷移
5. フッターボタンタップ → 各画面へ遷移

### 表示ルール
- 売り切れ商品: opacity 0.5、「売り切れ」バッジ表示、タップ不可
- 画像読み込み: 遅延読み込み（Lazy Loading）
- 画像なし商品: デフォルト画像（/static/images/no-image.png）表示
- 会計依頼中（Session.status='payment_requested'）: フッターに「会計をキャンセルして追加注文」ボタンを表示

---

## C-S03: 商品詳細画面

### 概要
商品の詳細情報を表示。数量選択、備考入力、カート追加。

### レイアウト
```
+----------------------------------+
| [←]                    [カート] |
+----------------------------------+
| [大サイズ画像]                   |
|                                  |
+----------------------------------+
| ハンバーグ定食                   |
| ¥1,200                           |
| （1回の注文で最大10個まで）      |
+----------------------------------+
| ジューシーなハンバーグに特製     |
| デミグラスソースをかけた人気     |
| メニューです。                   |
+----------------------------------+
| 数量: [ - ] [ 2 ] [ + ]          |
+----------------------------------+
| 備考（アレルギー等）             |
| [____________________________]   |
+----------------------------------+
|                                  |
| [ カートに追加 (¥2,400) ]       |
|                                  |
+----------------------------------+
```

### UI要素
- **ヘッダー**: 
  - 戻るボタン
  - カートアイコン
- **商品画像**: 大サイズ画像（800x600px）、画像なしの場合はデフォルト画像
- **商品情報**: 
  - 商品名（見出し1）
  - 価格（見出し2）
  - 最大注文数量の表示（キャプション）
  - 説明文
- **数量選択**: 
  - 増減ボタン（-/+）
  - 初期値: 1
  - 範囲: 1〜max_quantity_per_order（デフォルト10）
- **備考入力**: 
  - テキストエリア
  - プレースホルダー: 「例：ソース少なめ、アレルギー対応」
  - 最大200文字
- **カート追加ボタン**: 
  - 合計金額表示
  - 固定フッター

### 動作
1. 画像タップ → フルスクリーン表示（オプション）
2. +/-ボタンで数量調整 → 合計金額を再計算
3. 数量がmax_quantity_per_orderを超えないようにボタンを無効化
4. カート追加ボタンタップ
   - 数量制限チェック
   - カートに追加
   - トースト通知「カートに追加しました」
   - メニュー一覧へ戻る

### エラー表示
- 数量超過: 「この商品は1回の注文で最大{max}個までです」

---

## C-S04: カート画面

### 概要
カート内の商品を確認し、注文を確定する。

### レイアウト
```
+----------------------------------+
| [←] カート                       |
+----------------------------------+
| ハンバーグ定食 x 2               |
| ¥1,200 x 2 = ¥2,400              |
| 備考: ソース少なめ               |
| [削除]                           |
+----------------------------------+
| カレーライス x 1                 |
| ¥900 x 1 = ¥900                  |
| [削除]                           |
+----------------------------------+
|                                  |
| 合計: ¥3,300                     |
|                                  |
| [  注文を確定する  ]             |
|                                  |
+----------------------------------+
```

### UI要素
- **ヘッダー**: 
  - 戻るボタン
  - 「カート」タイトル
- **商品リスト**: 
  - 商品名、数量
  - 単価、小計
  - 備考（入力時のみ）
  - 削除ボタン
- **合計金額**: 太字、大きめフォント
- **注文確定ボタン**: 全幅、プライマリカラー

### 動作
1. 削除ボタンタップ → 該当商品をカートから削除
2. 注文確定ボタンタップ
   - 確認ダイアログ表示「注文を確定しますか？」
   - OKタップ → サーバーに送信
   - 成功 → 注文完了画面へ遷移
   - 失敗 → エラーメッセージ表示

### エラー表示
- カートが空: 「カートに商品がありません」
- 売り切れ商品: 「[商品名] は売り切れました。削除してください。」
- 数量超過: 「[商品名] は1回の注文で最大[数量]個までです」

---

## C-S05: 注文完了画面

### 概要
注文完了を通知し、メニュー一覧へ戻る。

### レイアウト
```
+----------------------------------+
|                                  |
|        ✓                         |
|                                  |
|  注文を受け付けました！          |
|                                  |
|  注文番号: #3                    |
|                                  |
|  調理が完了するまで              |
|  しばらくお待ちください          |
|                                  |
|  [ メニューに戻る ]              |
|                                  |
+----------------------------------+
```

### UI要素
- **成功アイコン**: チェックマーク（緑）
- **メッセージ**: 「注文を受け付けました！」
- **注文番号**: 「#3」（セッション内連番）
- **案内文**: 調理待ちの案内
- **メニューに戻るボタン**: セカンダリカラー

### 動作
1. 3秒後に自動でメニュー一覧へ遷移（オプション）
2. ボタンタップでメニュー一覧へ遷移

---

## C-S06: 注文履歴画面

### 概要
自分の注文、またはテーブル全体の注文履歴を表示。

### レイアウト
```
+----------------------------------+
| [←] 注文履歴                     |
+----------------------------------+
| [自分の注文] [全員の注文]       |
+----------------------------------+
| 注文 #3  12:35                   |
| [調理中]                         |
| ハンバーグ定食 x 2  ¥2,400      |
| カレーライス x 1    ¥900         |
| 合計: ¥3,300                     |
+----------------------------------+
| 注文 #1  12:10                   |
| [提供済み]                       |
| ビール x 2          ¥1,000       |
| 合計: ¥1,000                     |
+----------------------------------+
```

### UI要素
- **ヘッダー**: 
  - 戻るボタン
  - 「注文履歴」タイトル
- **タブ**: 
  - 自分の注文
  - 全員の注文
- **注文カード**: 
  - 注文番号、注文日時
  - ステータスバッジ
  - 商品リスト
  - 合計金額

### ステータスバッジ色
- **未調理**: グレー
- **調理中**: オレンジ
- **調理完了**: 青
- **提供済み**: 緑

### 動作
1. タブ切替 → 該当する注文を表示
2. 自動更新（10秒間隔）

---

## C-S07: 店員呼び出し画面

### 概要
店員を呼び出す。理由を選択し、メッセージを送信。

### レイアウト
```
+----------------------------------+
| [←] 店員呼び出し                 |
+----------------------------------+
| 呼び出し理由を選択してください   |
|                                  |
| ○ お水が欲しい                  |
| ○ 会計したい                    |
| ○ 質問がある                    |
| ○ 苦情・問題                    |
| ○ その他                        |
+----------------------------------+
| メッセージ（任意）               |
| [____________________________]   |
| [____________________________]   |
+----------------------------------+
|                                  |
| [  呼び出す  ]                   |
|                                  |
+----------------------------------+
```

### UI要素
- **ヘッダー**: 
  - 戻るボタン
  - 「店員呼び出し」タイトル
- **理由選択**: 
  - ラジオボタン
  - 5つの選択肢
- **メッセージ入力**: 
  - テキストエリア
  - 任意入力
  - 最大500文字
- **呼び出すボタン**: プライマリカラー

### 動作
1. 理由を選択
2. 必要に応じてメッセージ入力
3. 呼び出すボタンタップ
   - サーバーに送信
   - 成功 → トースト通知「店員を呼び出しました」
   - メニュー一覧へ戻る

---

## C-S08: 会計画面

### 概要
会計を依頼し、合計金額を確認。会計依頼後に追加注文したい場合はキャンセル可能。

### レイアウト（会計依頼前）
```
+----------------------------------+
| [←] 会計                         |
+----------------------------------+
|                                  |
|  ご利用ありがとうございました    |
|                                  |
|  合計金額                        |
|  ¥4,300                          |
|                                  |
|  レシートをお持ちの上、           |
|  レジまでお越しください           |
|                                  |
|  [  会計を依頼する  ]            |
|                                  |
+----------------------------------+
```

### レイアウト（会計依頼後）
```
+----------------------------------+
| [←] 会計                         |
+----------------------------------+
|                                  |
|  会計を受け付けました            |
|                                  |
|  合計金額                        |
|  ¥4,300                          |
|                                  |
|  レシートをお持ちの上、           |
|  レジまでお越しください           |
|                                  |
|  [ キャンセルして追加注文 ]      |
|                                  |
+----------------------------------+
```

### UI要素
- **ヘッダー**: 
  - 戻るボタン
  - 「会計」タイトル
- **メッセージ**: 感謝の言葉
- **合計金額**: 大きく表示
- **案内文**: レジへの誘導
- **会計依頼ボタン**: プライマリカラー（会計依頼前のみ）
- **キャンセルボタン**: セカンダリカラー（会計依頼後のみ）

### 動作
1. 画面表示時、合計金額を計算・表示（cancelled以外の注文）
2. 会計依頼ボタンタップ
   - Payment作成
   - Session.statusを'payment_requested'に更新
   - 成功メッセージ表示「会計を受け付けました」
   - ボタンを「キャンセルして追加注文」に変更
3. キャンセルボタンタップ
   - 確認ダイアログ「会計をキャンセルして追加注文しますか？」
   - OKタップ
   - Payment.statusを'cancelled'に更新
   - Session.statusを'active'に戻す
   - メニュー一覧へ遷移

---

## C-S09: 検索画面

### 概要
商品名で検索。

### レイアウト
```
+----------------------------------+
| [←] [__________] [検索]         |
+----------------------------------+
| 検索結果: 3件                    |
+----------------------------------+
| +------------------------------+ |
| | [画像]                       | |
| | ハンバーグ定食               | |
| | ¥1,200                       | |
| +------------------------------+ |
| ...                              |
+----------------------------------+
```

### UI要素
- **ヘッダー**: 
  - 戻るボタン
  - 検索入力欄
  - 検索ボタン
- **検索結果件数**: 「検索結果: 3件」
- **商品カード**: メニュー一覧と同じ

### 動作
1. キーワード入力
2. 検索ボタンタップまたはEnterキー
3. 検索実行、結果を表示
4. 商品カードタップ → 商品詳細画面へ遷移

---

## C-S10: セッション復帰確認画面

### 概要
Telegram Mini Appsを再度開いたときに、前回のセッションに復帰するかを確認。

### レイアウト
```
+----------------------------------+
|                                  |
|  前回のセッションが見つかりました|
|                                  |
|  店舗名: [店舗名]                |
|  テーブル: [A-1]                 |
|                                  |
|  前回のセッションに戻りますか？  |
|                                  |
|  [  はい  ]                      |
|                                  |
|  [ いいえ ]                      |
|                                  |
+----------------------------------+
```

### UI要素
- **セッション情報**: 店舗名、テーブル番号
- **確認メッセージ**: 「前回のセッションに戻りますか？」
- **はいボタン**: プライマリカラー
- **いいえボタン**: セカンダリカラー

### 動作
1. アプリ起動時、ローカルストレージから`session_code`を取得
2. サーバーにセッション有効性を確認
3. セッションが有効な場合、この画面を表示
4. 「はい」タップ
   - セッションに復帰
   - メニュー一覧へ遷移
5. 「いいえ」タップ
   - ローカルストレージをクリア
   - QRコードスキャン画面へ遷移
6. セッションが無効な場合
   - ローカルストレージをクリア
   - この画面をスキップ
   - QRコードスキャン画面へ遷移

---

## A-S01: ログイン画面

### 概要
管理画面への認証。

### レイアウト
```
+----------------------------------+
|                                  |
|        [店舗ロゴ]                |
|                                  |
|  モバイルオーダー管理            |
|                                  |
|  ユーザー名                      |
|  [____________________________]  |
|                                  |
|  パスワード                      |
|  [____________________________]  |
|                                  |
|  [  ログイン  ]                  |
|                                  |
+----------------------------------+
```

### UI要素
- **ロゴ**: 中央配置
- **タイトル**: 「モバイルオーダー管理」
- **ユーザー名入力**: テキストフィールド
- **パスワード入力**: パスワードフィールド
- **ログインボタン**: プライマリカラー

### 動作
1. ユーザー名、パスワード入力
2. ログインボタンタップ
   - 認証実行
   - 成功 → ダッシュボードへ遷移
   - 失敗 → エラーメッセージ表示

### エラー表示
- 認証失敗: 「ユーザー名またはパスワードが間違っています」
- アカウント無効: 「このアカウントは無効化されています」

---

## A-S02: ダッシュボード

### 概要
店舗全体のサマリーを表示。

### レイアウト
```
+----------------------------------+
| [メニュー] ダッシュボード        |
+----------------------------------+
| +--------------+ +--------------+|
| | アクティブ   | | 本日の注文   ||
| | セッション   | | 件数         ||
| | 5件          | | 32件         ||
| +--------------+ +--------------+|
| +--------------+ +--------------+|
| | 本日の売上   | | 調理待ち     ||
| | ¥45,000      | | 3件          ||
| +--------------+ +--------------+|
| +--------------+                 |
| | 店員呼び出し |                 |
| | 未対応 2件   |                 |
| +--------------+                 |
+----------------------------------+
| クイックアクセス                 |
| [注文ダッシュボード]             |
| [メニュー管理]                   |
| [セッション管理]                 |
+----------------------------------+
```

### UI要素
- **サイドメニュー**: 折りたたみ可能
- **サマリーカード**: 
  - アクティブセッション数
  - 本日の注文件数
  - 本日の売上
  - 調理待ち注文数
  - 店員呼び出し未対応件数
- **クイックアクセス**: 主要画面へのリンク

### 動作
1. 各カードをクリック → 詳細画面へ遷移
2. 自動更新（30秒間隔）

---

## A-S03: 注文ダッシュボード

### 概要
リアルタイムで全注文をOrderItem単位で表示し、ステータスを管理。

### レイアウト
```
+----------------------------------+
| [メニュー] 注文ダッシュボード    |
+----------------------------------+
| テーブル | 注文# | 商品 | 数量 | 時刻 | 経過 | ステータス | 操作 |
|---------|-------|------|------|------|------|-----------|------|
| A-1     | #3    | ハンバーグ| 2 | 12:35| 5分  | 未調理  | [調理開始] |
| A-1     | #3    | カレー  | 1 | 12:35| 5分  | 未調理  | [調理開始] |
| B-2     | #1    | ビール  | 2 | 12:10| 30分 | 調理中  | [完了] |
| ...                                                              |
+----------------------------------+
```

### UI要素
- **テーブル表示（OrderItem単位）**: 
  - テーブル番号
  - 注文番号
  - 商品名（完全表示）
  - 数量
  - 注文時刻
  - 経過時間（色分けなし）
  - ステータスバッジ
  - 操作ボタン

### 操作ボタン
- **未調理**: 「調理開始」ボタン
- **調理中**: 「完了」ボタン
- **調理完了**: 「提供済み」ボタン
- **全ステータス**: 「キャンセル」ボタン（管理者のみ、Order全体をキャンセル）

### 動作
1. 操作ボタンクリック → OrderItemステータス更新
2. 全OrderItemが同じstatusならOrderステータスも連動更新
3. キャンセルボタンクリック → 確認ダイアログ → Order全体をキャンセル
4. 自動更新（5秒間隔）
5. フィルタ機能（ステータス別）

---

## A-S04: テーブル管理画面

### 概要
テーブル一覧、登録、編集、QRコード生成。

### レイアウト
```
+----------------------------------+
| [メニュー] テーブル管理          |
+----------------------------------+
| [+ 新規登録]                     |
+----------------------------------+
| テーブル番号 | 定員 | QRコード | 操作 |
|-------------|------|----------|------|
| A-1         | 4    | [表示]   | [編集][削除] |
| A-2         | 2    | [表示]   | [編集][削除] |
| B-1         | 6    | [表示]   | [編集][削除] |
| ...                              |
+----------------------------------+
```

### UI要素
- **新規登録ボタン**: テーブル登録画面へ遷移
- **テーブルテーブル**: 
  - テーブル番号
  - 定員
  - QRコード表示ボタン
  - 編集・削除ボタン

### 動作
1. QRコード表示ボタンクリック → モーダルでQRコード画像表示、ダウンロード可能
2. 編集ボタンクリック → テーブル編集画面へ遷移
3. 削除ボタンクリック → 確認ダイアログ → 削除実行

---

## A-S05: テーブル登録・編集画面

### 概要
テーブル情報の入力。

### レイアウト
```
+----------------------------------+
| [メニュー] テーブル登録          |
+----------------------------------+
| テーブル番号 *                   |
| [____________________________]   |
|                                  |
| 定員                             |
| [____________________________]   |
|                                  |
| [  保存  ] [キャンセル]          |
+----------------------------------+
```

### UI要素
- **テーブル番号入力**: 必須、最大20文字
- **定員入力**: 1〜20
- **保存ボタン**: プライマリカラー
- **キャンセルボタン**: セカンダリカラー

### 動作
1. 情報入力
2. 保存ボタンクリック
   - バリデーション実行
   - 成功 → QRコード生成、テーブル管理画面へ戻る
   - 失敗 → エラーメッセージ表示

---

## A-S06: メニュー管理画面

### 概要
商品一覧、登録、編集、削除、売り切れ管理。

### レイアウト
```
+----------------------------------+
| [メニュー] メニュー管理          |
+----------------------------------+
| [+ 新規商品登録]                 |
+----------------------------------+
| 画像 | 商品名 | カテゴリ | 価格 | 売り切れ | 操作 |
|------|--------|----------|------|----------|------|
| [img]| ハンバ | メイン   | 1200 | [ON/OFF] | [編集][削除] |
| [img]| カレー | メイン   | 900  | [ON/OFF] | [編集][削除] |
| ...                              |
+----------------------------------+
```

### UI要素
- **新規商品登録ボタン**: 商品登録画面へ遷移
- **商品テーブル**: 
  - サムネイル画像
  - 商品名
  - カテゴリ
  - 価格
  - 売り切れトグル
  - 編集・削除ボタン

### 動作
1. 売り切れトグルクリック → is_availableを即座に更新
2. 編集ボタンクリック → 商品編集画面へ遷移
3. 削除ボタンクリック → 確認ダイアログ → 論理削除実行

---

## A-S07: 商品登録・編集画面

### 概要
商品情報入力、画像アップロード。

### レイアウト
```
+----------------------------------+
| [メニュー] 商品登録              |
+----------------------------------+
| 商品名 *                         |
| [____________________________]   |
|                                  |
| カテゴリ *                       |
| [▼ メイン料理              ]     |
|                                  |
| 価格 *                           |
| [____________________________] 円|
|                                  |
| 1回の注文での最大数量 *          |
| [__10__]                         |
|                                  |
| 説明                             |
| [____________________________]   |
| [____________________________]   |
|                                  |
| 商品画像（任意）                 |
| [ドラッグ&ドロップまたはクリック] |
| [プレビュー画像]                 |
|                                  |
| [  保存  ] [キャンセル]          |
+----------------------------------+
```

### UI要素
- **商品名入力**: 必須、最大100文字
- **カテゴリ選択**: ドロップダウン
- **価格入力**: 必須、0.01以上
- **最大数量入力**: 必須、1〜99、デフォルト10
- **説明入力**: テキストエリア、最大1000文字
- **画像アップロード**: 
  - ドラッグ&ドロップエリア
  - クリックでファイル選択
  - プレビュー表示
  - JPEG/PNG/WebP、最大2MB
  - **任意項目（画像なしでも登録可能）**
- **保存・キャンセルボタン**

### 動作
1. 情報入力
2. 画像をアップロード → プレビュー表示（任意）
3. 保存ボタンクリック
   - バリデーション実行
   - 画像がある場合：リサイズ処理
   - 画像がない場合：デフォルト画像を使用
   - 成功 → メニュー管理画面へ戻る
   - 失敗 → エラーメッセージ表示

---

## A-S08: カテゴリ管理画面

### 概要
カテゴリ一覧、登録、編集、並び替え。

### レイアウト
```
+----------------------------------+
| [メニュー] カテゴリ管理          |
+----------------------------------+
| [+ 新規カテゴリ]                 |
+----------------------------------+
| カテゴリ名 | 表示順 | 操作        |
|-----------|--------|-------------|
| ≡ 前菜     | 1      | [編集][削除]|
| ≡ メイン料理| 2      | [編集][削除]|
| ≡ デザート  | 3      | [編集][削除]|
| ...                              |
+----------------------------------+
```

### UI要素
- **新規カテゴリボタン**: モーダル表示
- **カテゴリリスト**: 
  - ドラッグハンドル（≡）
  - カテゴリ名
  - 表示順
  - 編集・削除ボタン

### 動作
1. ドラッグ&ドロップで並び替え → display_order更新
2. 編集ボタンクリック → モーダルで編集
3. 削除ボタンクリック → 確認ダイアログ → 削除実行

---

## A-S09: 店員呼び出し一覧画面

### 概要
顧客からの呼び出しに対応。

### レイアウト
```
+----------------------------------+
| [メニュー] 店員呼び出し一覧      |
+----------------------------------+
| テーブル | 理由 | 時刻 | ステータス | 操作 |
|---------|------|------|-----------|------|
| A-1     | 会計 | 12:40| 未対応     | [対応開始] |
| B-2     | お水 | 12:35| 対応中     | [完了] |
| ...                              |
+----------------------------------+
```

### UI要素
- **呼び出しテーブル**: 
  - テーブル番号
  - 理由
  - 呼び出し時刻
  - ステータスバッジ
  - 操作ボタン

### 動作
1. 対応開始ボタンクリック → status='in_progress'に更新
2. 完了ボタンクリック → status='resolved'に更新
3. 自動更新（5秒間隔）

---

## A-S10: セッション管理画面

### 概要
アクティブセッション一覧、会計処理。

### レイアウト
```
+----------------------------------+
| [メニュー] セッション管理        |
+----------------------------------+
| テーブル | 開始時刻 | 人数 | 注文数 | 合計 | 操作 |
|---------|---------|------|--------|------|------|
| A-1     | 12:30   | 4    | 3      | 4300 | [会計] |
| B-2     | 12:10   | 2    | 1      | 1000 | [会計] |
| ...                              |
+----------------------------------+
```

### UI要素
- **セッションテーブル**: 
  - テーブル番号
  - 開始時刻
  - 来店人数
  - 注文数
  - 合計金額
  - 会計ボタン

### 動作
1. 会計ボタンクリック → 会計処理画面へ遷移
2. 自動更新（10秒間隔）

---

## A-S11: 会計処理画面

### 概要
注文明細、レシート印刷、会計完了。

### レイアウト
```
+----------------------------------+
| [メニュー] 会計処理              |
+----------------------------------+
| テーブル: A-1                    |
| 来店人数: 4人                    |
| 開始時刻: 12:30                  |
+----------------------------------+
| 注文明細                         |
| #3 ハンバーグ定食 x2  ¥2,400    |
| #3 カレーライス x1    ¥900       |
| #1 ビール x2          ¥1,000     |
+----------------------------------+
| 合計: ¥4,300                     |
+----------------------------------+
| [レシート印刷]                   |
|                                  |
| 支払い方法                       |
| ○ 現金 ○ クレジット ○ 電子マネー|
|                                  |
| [  会計完了  ]                   |
+----------------------------------+
```

### UI要素
- **セッション情報**: テーブル、人数、開始時刻
- **注文明細リスト**: 注文番号、商品、数量、金額
- **合計金額**: 太字、大きめ
- **レシート印刷ボタン**: PDF生成・印刷
- **支払い方法選択**: ラジオボタン
- **会計完了ボタン**: プライマリカラー

### 動作
1. レシート印刷ボタンクリック → PDF生成、印刷ダイアログ表示
2. 支払い方法選択
3. 会計完了ボタンクリック
   - Payment, Session更新
   - 成功メッセージ表示
   - セッション管理画面へ戻る

---

## A-S12: 売上管理画面

### 概要
日次・月次レポート、グラフ表示。

### レイアウト
```
+----------------------------------+
| [メニュー] 売上管理              |
+----------------------------------+
| [日次] [週次] [月次]             |
| 期間: [2024-01-01] 〜 [2024-01-31] |
+----------------------------------+
| 売上合計: ¥450,000               |
| 注文件数: 320件                  |
| 客数: 850人                      |
+----------------------------------+
| [売上グラフ]                     |
|                                  |
+----------------------------------+
| 商品別売上ランキング             |
| 1. ハンバーグ定食  ¥120,000     |
| 2. カレーライス    ¥90,000      |
| ...                              |
+----------------------------------+
```

### UI要素
- **期間選択タブ**: 日次、週次、月次
- **日付選択**: DatePicker
- **サマリーカード**: 売上、注文件数、客数
- **売上グラフ**: 折れ線グラフ（Chart.js等）
- **商品別ランキング**: トップ10

### 動作
1. 期間選択 → データ再取得、グラフ更新
2. CSVエクスポートボタン（オプション）

---

## A-S13: ユーザー管理画面

### 概要
スタッフアカウント管理。

### レイアウト
```
+----------------------------------+
| [メニュー] ユーザー管理          |
+----------------------------------+
| [+ 新規ユーザー]                 |
+----------------------------------+
| ユーザー名 | メール | 役割 | 操作 |
|----------|--------|------|------|
| admin    | a@...  | 管理者| [編集][無効化] |
| chef1    | c@...  | 料理人| [編集][無効化] |
| ...                              |
+----------------------------------+
```

### UI要素
- **新規ユーザーボタン**: ユーザー登録画面へ遷移
- **ユーザーテーブル**: 
  - ユーザー名
  - メールアドレス
  - 役割
  - 編集・無効化ボタン

### 動作
1. 編集ボタンクリック → ユーザー編集画面へ遷移
2. 無効化ボタンクリック → is_active=FALSEに更新
